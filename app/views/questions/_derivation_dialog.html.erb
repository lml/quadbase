<%# Copyright 2011-2012 Rice University. Licensed under the Affero General Public 
    License version 3 or later.  See the COPYRIGHT file for details. %>

<% # Clients of this partial must supply the following variables:
   # question
   # projects
%>

<%= form_tag question_new_derivation_path(question), :method => :put, :remote => true do %>  
<% # If there happens to be no project available with the current_user, then this next three 
     lines creates a project for them.%>  
     
  <% if projects.empty? %>
    <% projects.default_for_user!(current_user) %>
    <%= label_tag "You did not have an available project workspace available, so Quadbase 
                  just created one for you." %>
  <% end %>
    
  <%= hidden_field_tag :question_id, question.id %>
  <%= radio_button_tag "edit", "now", true %>
  <%= label_tag "edit_now", "Edit Now" %>
  <%= radio_button_tag "edit", "later", false %>
  <%= label_tag "edit_later", "Edit Later" %>
  <br/><br/>
    
  <%= label_tag "In:" %>
    <table>
    <% projects.each do |w| %>
      <tr>
        <td>
          <%= submit_tag w.name, :name => "project[" + w.id.to_s + "]",
                                 :class => "#{submit_classes}",
                                 :style => "width: 100%; text-align: left;" %>
        </td>
      </tr>
    <% end %>
    </table>
<% end %> 
