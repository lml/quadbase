<%# Copyright 2011-2012 Rice University. Licensed under the Affero General Public 
    License version 3 or later.  See the COPYRIGHT file for details. %>

<% # Clients of this partial must supply the following variable:
   # commentable
   # Additionally, they can override the following variable:
   subscription ||= false
%>
<% sub_string = subscription ? "Unsubscribe" : "Subscribe" %>
<% show_confirm = (subscription && commentable.comment_thread.commentable_type == 'Discussion') %>
<%= link_to sub_string,
            polymorphic_path([sub_string.downcase, commentable, :comments]),
            :confirm => (show_confirm ? "Are you sure?\n" +
                                        "Once you unsubscribe from this discussion, " +
                                        "you will not be able to see it anymore." : nil),
            :remote => true %>
